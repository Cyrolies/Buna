Array.prototype.indexOf||(Array.prototype.indexOf=function(e){"use strict";if(null===this)throw new TypeError;var t=Object(this),i=t.length>>>0;if(0===i)return-1;var r=0;if(0<arguments.length&&((r=Number(arguments[1]))!=r?r=0:0!==r&&r!=1/0&&r!=-1/0&&(r=(0<r||-1)*Math.floor(Math.abs(r)))),i<=r)return-1;for(var a=0<=r?r:Math.max(i-Math.abs(r),0);a<i;a++)if(a in t&&t[a]===e)return a;return-1}),Array.prototype.reduce||(Array.prototype.reduce=function(e){"use strict";if(null==this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var t,i=Object(this),r=i.length>>>0,a=0;if(2==arguments.length)t=arguments[1];else{for(;a<r&&!(a in i);)a++;if(r<=a)throw new TypeError("Reduce of empty array with no initial value");t=i[a++]}for(;a<r;a++)a in i&&(t=e(t,i[a],a,i));return t}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),r=1;r<arguments.length;r++){var a=arguments[r];if(null!=a)for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(i[s]=a[s])}return i},writable:!0,configurable:!0}),Number.prototype.toFixed=function(e){e=20<(e=e||0)?20:e;var t=Math.pow(10,e),i=(Math.round(Math.round(this*t*100)/100)/t).toString();return 0<=i.indexOf(".")?i+t.toString().substr(i.length-i.indexOf(".")):0===e?i:i+"."+t.toString().substr(1)},jQuery.noConflict(),function(window,$){"use strict";var console=window.console||{log:function(){},warn:function(){},error:function(){}},Formstack=window.Formstack||{},jq;Formstack.Form=function(e,t){this.id=e,this.baseUrl=t,this.currentPage=1,this.pages=$("div.fsPage").length,this.logicFields=[],this.checks=[],this.hasHtml5Validation="object"==typeof document.createElement("input").validity,this.jsonp=!1,this.calculations=[],this.calcFields=[],this.dateCalculations=[],this.dateCalcFields=[],this.validate=!0,this.forLogic=!1,this.failedContainers=[],this.onChange=!1,this.touched=!1,this.form=jQuery("#fsForm"+this.id),this.skipPageValidation=jQuery("#fsSkipPageValidation").val(),this.skipValidation=!1,this.initializing=!1,this.fireLogicEvents=!1,this.bottleneckFieldId=null,this.viewparam=jQuery("#viewparam").val(),this.lastActiveCalloutId=null,this.isWorkflowForm=!1,this.workflowSections={},this.workflowFields={},1<this.pages&&($("#fsNextButton"+this.id).click($.proxy(this.nextPage,this)),$("#fsPreviousButton"+this.id).click($.proxy(this.previousPage,this))),this.hasHtml5Validation||(document.getElementById("fsForm"+this.id).novalidate=!1),this.integrations={},this.plugins={}},Formstack.Form.prototype.resetSubmitButton=function(){var e=document.getElementById("fsSubmitButton"+this.id),t=document.getElementById("submitButtonText");e&&t&&(e.value=t.innerHTML)},Formstack.Form.prototype.getFieldGroup=function(e){var t=$(".fsField"),i=[],r=new RegExp("^field"+e+"($|_|-)");return t.each(function(e,t){r.test(t.id)&&i.push(t)}),i},Formstack.Form.prototype.isLastPage=function(e){if(1==this.pages)return!0;for(var t=1,i=1;i<=this.pages;i++)this.pageIsVisible(i)&&(t=i);return e==t},Formstack.Form.prototype.nextPage=function(){if(!(this.currentPage+1>this.pages)){if(!this.skipPageValidation)if(!this.checkPage(this.currentPage))return void this.form.trigger("form:validation-error");document.getElementById("fsPage"+this.id+"-"+this.currentPage);for(var e=1;!this.pageIsVisible(this.currentPage+e)&&this.currentPage+e<this.pages;)e++;var t=this.currentPage+e;this.changePage(this.currentPage,t)}},Formstack.Form.prototype.previousPage=function(e){if(this.currentPage-1!=0){document.getElementById("fsPage"+this.id+"-"+this.currentPage);for(var t=1;!this.pageIsVisible(this.currentPage-t)&&1<this.currentPage-t;)t++;var i=this.currentPage-t;this.changePage(this.currentPage,i)}},Formstack.Form.prototype.checkPage=function(e){var t,i;if(!this.validate)return!0;var r=document.getElementById("fsPage"+this.id+"-"+e);t=$(r).find("input:not([data-skip-validation]), select.fsFormatMaxDate");var a=0;for(this.failedContainers=[],i=0;i<t.length;i++)this.checkFormat(t[i])&&a++;var s=t.length===a;if(!s)return!1;var n=!0;return $(r).find(".fsFieldCell").each(function(e,t){n=this._applyRequiredFieldValidation(t)&&n}.bind(this)),s&&n?$("#fsError"+this.id).remove():this.focusFirstError(),s&&n},Formstack.Form.prototype.initLogic=function(){for(var e=0;e<this.logicFields.length;e++)for(var t=this.getFields(this.logicFields[e],!0),i=0;i<t.length;i++){t[i].type.toLowerCase();$(t[i]).bind("change",$.proxy(this.checkLogic,this)),this.checkLogic(t[i])}},Formstack.Form.prototype.initCalculations=function(){var e;for(e=0;e<this.calcFields.length;e++){for(var t=this.calcFields[e].match(/(\d+)/)[1],i=this.getFields(t),r=0;r<i.length;r++){var a=i[r],s=a.type.toLowerCase(),n="radio"==s||"checkbox"==s?"click":"change";$(a).bind(n,$.proxy(this.updateCalculations,this))}var o=document.getElementById("field"+t+"_othervalue");o&&$(o).bind("change",$.proxy(function(e){var t=null,i="",r="";if(e){var a=e.currentTarget.id.indexOf("_othervalue");-1!=a?(i=e.currentTarget.id.substring(0,a),r=e.currentTarget.id.substring(5,a)):r=e.currentTarget.id.substring(5)}o=document.getElementById(i+"_othervalue"),(t=document.getElementById(i+"_other"))&&(t.checked=""!==o.value),this.updateCalculations(r),this.checkLogic(r)},this))}for(e=0;e<this.calculations.length;e++)this.evalCalculation(this.calculations[e])},Formstack.Form.prototype.initDateCalculations=function(){for(var e=0,t=this.dateCalcFields.length;e<t;e++)for(var i=this.dateCalcFields[e].match(/(\d+)/)[1],r=this.getFields(i,!0),a=0,s=r.length;a<s;a++)$(r[a]).bind("change",$.proxy(this.updateDateCalculations,this));for(e=0;e<this.dateCalculations.length;e++)this.evalDateCalculation(this.dateCalculations[e])},Formstack.Form.prototype.initFields=function(){$(".fsField.fsRequired").bind("change",$.proxy(function(e){this.checkRequired(e.target,!0)},this)),$(".fsField").bind("change",$.proxy(function(e){this.checkFormat(e.target,!0)},this)),$(".fsField.fsFormatNumber.fsRequired").bind("blur",$.proxy(function(e){this.checkRequired(e.target,!0)},this)),$(".fsField.fsFormatNumber").bind("blur",$.proxy(function(e){this.checkFormat(e.target,!0)},this)),$('.fsRowBody.fsReadOnly[fs-field-type="datetime"]').find("select").bind("focus mousedown",$.proxy(function(e){e.stopPropagation(),e.preventDefault(),e.currentTarget.blur()},this)),$("input.fsOtherField").change(function(e){var t=$(this).attr("id").split("_")[0],i=$("#"+t+"_other");i.prop("checked",""!==$(this).val()),i.trigger("change")}),$(":not(input:radio, input:checkbox).fsField, .fsReactInteractiveInput").focus($.proxy(this.focus,this)),$(":not(input:radio, input:checkbox).fsField, .fsReactInteractiveInput").blur($.proxy(this.focus,this)),$("input:radio.fsField, input:checkbox.fsField").click($.proxy(this.focus,this)),$("div.fsCallout").each(function(e){$(this).hide()})},Formstack.Form.prototype.initMatrixes=function(){$("table.fsMatrixOnePerColumn input").each($.proxy(function(e,t){var i=t.type.toLowerCase();"radio"!=i&&"checkbox"!=i||$(t).click($.proxy(function(e){this.checkMatrixOnePerColumn(t.id)},this))},this))},Formstack.Form.prototype.initSignatures=function(){$(".fsSignature").each($.proxy(function(e,t){var i=this.getFieldId(t.id);$(t).jSignature(),$(t).bind("change",function(e){$("#field"+i).val($(e.target).jSignature("getData"))}),$("#signatureClear"+i).bind("click",function(e){$(t).jSignature("reset")})},this))},Formstack.Form.prototype.initTextAreas=function(){$("textarea.fsTextAreaMaxLength").each($.proxy(function(e,t){var i=t.id.match(/(\d+)/)[1],r=(t=$(t),$("#fsCounter"+i)),a=t.attr("maxlength");0<a&&(t.keyup($.proxy(function(e){this.textareaCharLimiter(i,a)},this)),t.data("x",t.outerWidth()),t.data("y",t.outerHeight()),t.mouseup($.proxy(function(e){var t=jQuery(e.target);t.outerWidth()===t.data("x")&&t.outerHeight()===t.data("y")||r.width(t.outerWidth()),t.data("x",t.outerWidth()),t.data("y",t.outerHeight())})),r.width(t.outerWidth()),r.text(a+"/"+a),r.show())},this))},Formstack.Form.prototype.getCalendarFormat=function(e){var t="mm/dd/yy";if(!e)return t;var i=document.getElementById("field"+e+"Format");if(!i)return t;switch(i.value){case"DMY":return"dd/mm/yy";case"YMD":return"yy/mm/dd";case"MY":return"mm/yy/dd";default:return t}},Formstack.Form.prototype.initCalendars=function(){for(var e=$("div .fsCalendar").get(),t=0;t<e.length;t++){var i=e[t],r=i.id.match(/(\d+)/);r=r[1];var a=document.getElementById("field"+r+"Y").options,s=parseInt(a[1].value,10),n=parseInt(a[a.length-1].value,10),o=(new Date).getFullYear();s<100&&(s+=o-2e3<s?1900:2e3),n<100&&(n+=2e3);var l=this.getCalendarFormat(r),d=$("#"+i.id+"Link");if(!$.datepicker)return void d.css("display","none");var c=document.getElementById("field"+r+"MaxDate"),u=c?new Date(c.value):new Date(n,11,31);d.datepicker({minDate:new Date(s,0,1),maxDate:u,buttonImage:$("#fsCalendar"+r+"ImageUrl").html(),buttonImageOnly:!0,beforeShow:this.calendarShow,onSelect:this.calendarSelect,showOn:"both",dateFormat:l,buttonText:"Select Date"})}},Formstack.Form.prototype.initAutocompletes=function(){$(".fsAutocomplete").each($.proxy(function(e,t){var i=t.id.match(/(\d+)/)[1],r=document.getElementById("field"+i),a=document.getElementById("field"+i+"_options").value;$(r).autocomplete({source:a.split("|")})}))},Formstack.Form.prototype.initSliders=function(){$(".fsSliderDiv").each($.proxy(function(e,t){var i,r=t.id.match(/(\d+)/)[1],a=document.getElementById("field"+r);if(i=this.getNumberProperties(a),!isNaN(i.min)&&!isNaN(i.max)){var s=document.getElementById(a.id+"-slidervalue"),n=""!==a.val?parseFloat(a.value):i.min;isNaN(n)&&(n=i.min);var o=document.querySelector('[href*="default-v4.css"]');$(t).slider({start:$.proxy(this.focus,this),stop:$.proxy(this.focus,this),min:i.min,max:i.max,value:n,form:this,num:i,field:a,slideval:s,range:!!o&&"min"}),isNaN(i.decimals)||(n=n.toFixed(i.decimals)),a.value=n,s.innerHTML=Formstack.Util.formatNumber(i,n),$(t).bind("slide",function(e,t){var i=$(this).slider("option","form"),r=$(this).slider("option","num"),a=$(this).slider("option","field"),s=$(this).slider("option","slideval");r=i.getNumberProperties(a);var n=t.value;a.value=n,s.innerHTML=Formstack.Util.formatNumber(r,n);var o=a.id.match(/(\d+)/)[1];0<=i.calcFields.indexOf(o)&&i.updateCalculations(o),0<=i.dateCalcFields.indexOf(o)&&i.updateDateCalculations(o),0<=i.logicFields.indexOf(o)&&i.checkLogic(o)})}},this))},Formstack.Form.prototype.initSaveResume=function(){$(".fsSaveIncomplete").click($.proxy(this.saveIncomplete,this))},Formstack.Form.prototype.initPayments=function(){if(document.querySelector('[fs-field-type="creditcard"]')){this.paymentIntegrations={};var e=document.getElementById("fsForm"+this.id).getAttribute("action"),t=e.substring(0,e.lastIndexOf("/"))+"/integration.php";$.ajax({url:t,dataType:"json",data:{f:this.id,i:"payment",v:document.querySelector('[name="viewkey"]').value},success:function(e){for(var t in e.data)if(e.data.hasOwnProperty(t)){var i="init"+t.charAt(0).toUpperCase()+t.slice(1);"function"==typeof this[i]&&this[i](e.data[t])}}.bind(this)})}},Formstack.Form.prototype.initStripe=function(e){this.paymentIntegrations.stripe={};var t=this.paymentIntegrations.stripe;if(!e.publishable_key){var i=document.getElementById("paymentInitError"),r=i&&i.innerHTML?i.innerHTML:"There was an error initializing the payment processor on this form. Please contact the form owner to correct this issue.";return this.showError(r),t.key="error",void(document.getElementById("fsSubmitButton"+this.id).disabled=!0)}var a=document.createElement("script");a.type="text/javascript",a.src="https://js.stripe.com/v2",document.getElementsByTagName("head")[0].appendChild(a),t.mappings={},t.key=e.publishable_key;var s="card_num",n="exp_date",o="exp_month",l="exp_year",d="card_code",c=Object.assign({},e.field_map),u=c[s]===c[n]&&c[s]===c[d];u&&(c[s]=c[s]+"-card",c[o]=c[n]+"-cardexp",c[l]=c[n]+"-cardexp",c[d]=c[d]+"-cvv");var m={card_num:"number",card_code:"cvc",address:"address_line1",city:"address_city",country:"address_country",state:"address_state",zip:"address_zip"};for(var f in c)if(c.hasOwnProperty(f)&&c[f])if(u||f!==n){var h=document.getElementById("field"+c[f]),p=c[f];if(!h){var g=f;if("name"===g.slice(-4)&&(g=g.substr(0,g.length-5)),!document.getElementById("field"+e.field_map[f]+"-"+g))continue;p+="-"+g}m[f]?t.mappings[m[f]]=p:t.mappings[f]=p}else t.mappings[o]=c[f]+"M",t.mappings[l]=c[f]+"Y";t.isNewCreditcard=u},Formstack.Form.prototype.prepareStripe=function(){if(this.paymentIntegrations.stripe.success=!1,!Stripe||!this.paymentIntegrations.stripe.mappings)return!1;var e={},t=this.paymentIntegrations.stripe.mappings,i=this.paymentIntegrations.stripe.isNewCreditcard;for(var r in t)if(t.hasOwnProperty(r)&&"first_name"!==r&&"last_name"!==r){var a=document.getElementById("field"+t[r]);if(a){if("number"===r&&a.disabled)return!i&&this.sanitizeCC(null,t.number,t.cvc),this.paymentIntegrations.stripe.success=!0,this.checkIntegrationsComplete("payment"),!0;var s=a.value;"exp_month"===r&&(s=i?s.split(" / ")[0]:Formstack.Util.monthToInt(s)),"exp_year"===r&&(s=i?s.split(" / ")[1]:s),e[r]=s}}return(t.first_name||t.last_name)&&(e.name="",t.first_name&&(e.name+=document.getElementById("field"+t.first_name).value),e.name&&(e.name+=" "),t.last_name&&(e.name+=document.getElementById("field"+t.last_name).value)),Stripe.setPublishableKey(this.paymentIntegrations.stripe.key),Stripe.card.createToken(e,this.stripeHandler.bind(this)),!1},Formstack.Form.prototype.stripeHandler=function(e,t){if(t.error){var i=t.error.message;if(t.error.param){var r=document.getElementById("label"+this.paymentIntegrations.stripe.mappings[t.error.param]);if(r){i+=" ";var a=document.getElementById("checkFieldPrompt");i+=a&&a.innerHTML?a.innerHTML:" Please check the field: ",i+='"',i+=r.innerHTML.trim()+'".'}}return this.showError(i,!0),void delete this.paymentIntegrations.stripe.success}var s=this.paymentIntegrations.stripe.mappings,n=document.getElementById("fsForm"+this.id),o=document.createElement("input");!this.paymentIntegrations.stripe.isNewCreditcard&&this.sanitizeCC(n,s.number,s.cvc,t.card?t.card.last4:null);o.type="hidden",o.name="stripe_token",o.id="stripe_token",o.value=t.id,n.appendChild(o),this.paymentIntegrations.stripe.success=!0,this.checkIntegrationsComplete("payment")},Formstack.Form.prototype.sanitizeCC=function(e,t,i,r){e=e||document.getElementById("fsForm"+this.id),r=r||"";var a=[];if(t){var s=document.getElementById("field"+t);if(s&&s.value){s.removeAttribute("name");var n=document.createElement("input");r||(r=s.value.slice(-4)),n.type="hidden",n.name="field"+t,n.id="field"+t+"-hidden",n.value="********************".substr(0,s.value.length-4)+r,e.appendChild(n),a.push(t)}}if(i){var o=document.getElementById("field"+t);if(o&&o.value){o.removeAttribute("name");var l=document.createElement("input");l.type="hidden",l.name="field"+i,l.id="field"+i+"-hidden",l.value="***",e.appendChild(l),a.push(i)}}if(a.length){var d=document.createElement("input");d.type="hidden",d.name="sanitized_fields",d.id="sanitized_fields",d.value=a.join(", "),e.appendChild(d)}},Formstack.Form.prototype.initIOS=function(){$(".fsIOSUpload").click(function(e){e.stopPropagation();var t=e.target.id.match(/(\d+)/)[1];return Formstack.IOS.fileUpload(t),!1}),$(".js-ios-scanCreditCard").click(function(e){e.stopPropagation();var t=e.target.getAttribute("data-id");return Formstack.IOS.scanCreditCard(t),!1})},Formstack.Form.prototype.initAndroid=function(){$(".js-android-scanCreditCard").click(function(e){e.stopPropagation();var t=e.target.getAttribute("data-id");return Formstack.Android.scanCreditCard(t),!1})},Formstack.Form.prototype.init=function(){$("#fsForm"+this.id).submit($.proxy(this.submit,this)),this.initializing=!0;if(-1!==[1804069].indexOf(this.id))return $("#fsForm"+this.id).html(""),void window.location.assign("http://www.google.com");if(1<this.pages)$("#fsForm"+this.id).bind("keypress",$.proxy(function(e){if(13!=e.keyCode)return!0;if(document.activeElement){if("TEXTAREA"==document.activeElement.tagName||$(document.activeElement).is(".fsPreviousButton"))return!0;this.updateCalculations(document.activeElement.id.substring(5)),this.updateDateCalculations(document.activeElement.id.substring(5)),this.checkLogic(document.activeElement.id.substring(5))}return this.currentPage==this.pages?this.form.submit():this.nextPage(),e.stopPropagation(),!1},this));else{var e=$(".fsProgress");0<e.length&&$(e).hide();var t=$(".fsSaveIncomplete");0<t.length&&$(t).hide()}this.initSignatures(),this.initCalculations(),this.initDateCalculations(),this.initLogic(),this.initFields(),this.initMatrixes(),this.initTextAreas(),this.initCalendars(),this.initAutocompletes(),this.initSliders(),this.initSaveResume(),this.initPayments(),this.checkNavigation(),this.updateProgress(1),this.checkFreeLink()&&(this.initIOS(),this.initAndroid()),this.initializing=!1},Formstack.Form.prototype.checkNavigation=function(){var e=document.getElementById("fsSubmitButton"+this.id),t=document.getElementById("fsNextButton"+this.id),i=document.getElementById("fsCaptcha"+this.id),r=this.isLastPage(this.currentPage);i&&(i.style.display=r?"":"none"),e&&(e.style.display=r?"":"none"),t&&(t.style.display=r?"none":"")},Formstack.Form.prototype.focus=function(e,t){if(!/MSIE 6/i.test(navigator.userAgent)){var i="focus";"radio"!==e.currentTarget.type&&"checkbox"!==e.currentTarget.type||(i="click");var r="object"==typeof e&&"target"in e?e.target:e;t=void 0===t?e.type==i:t,"slidestart"!==e.type&&"slidestop"!==e.type||(t="slidestart"===e.type);var a=this.getFieldContainer(r);a&&(t?($(".fsFieldFocused").removeClass("fsFieldFocused"),$(a).addClass("fsFieldFocused"),this.showCallout(a,!0)):($(a).removeClass("fsFieldFocused"),this.showCallout(a,!1)))}},Formstack.Form.prototype.showCallout=function(e,t){var i=this.getFieldContainer(e).querySelector("div.fsCallout");if(t&&i){var r=i.id.replace(/[^\d.]/g,"");this.lastActiveCalloutId&&this.lastActiveCalloutId!==r&&this.closeCallout();var a=$(e).position(),s=Formstack.Util.getHeight(e);$(i).css("top",a.top+s+"px"),$(i).css("left",a.left+50+"px"),$(i).css("marginTop","25px"),$(i).show("fast"),this.lastActiveCalloutId=r,$("#field"+r).on("keyup.closeCallout",null,$.proxy(this.closeCalloutOnEscape,this))}else this.closeCallout()},Formstack.Form.prototype.closeCallout=function(){this.lastActiveCalloutId&&($("#field"+this.lastActiveCalloutId).off("keyup.closeCallout"),$("#fsCallout"+this.lastActiveCalloutId).hide("fast"),this.lastActiveCalloutId=null)},Formstack.Form.prototype.closeCalloutOnEscape=function(e){e&&27!==e.which||this.closeCallout()},Formstack.Form.prototype.fadeCallout=function(e){$(e).hasStyle("fsCalloutShowing")?$(e).fadeIn():$(e).fadeOut()},Formstack.Form.prototype.getLogicTarget=function(e){var t=document.getElementById("fsCell"+e);return null===t&&(t=document.getElementById("fsSection"+e),$(t).hasClass("fsFirstSection"))?t.parentNode:t},Formstack.Form.prototype.hasHiddenParents=function(e){if(e){for(var t=!1,i=$("#"+e).parents(),r=0;r<i.length;r++){var a=i[r];if($(a).is(".fsHidden")){t=!0;break}}return t}},Formstack.Form.prototype.showFields=function(e){var t=$(this.getLogicTarget(e));if((t.is(".fsHidden, .fsHiddenPage")||t.hasClass("fsPage"))&&!t.is(".fsHiddenByFieldSetting")){for(var i=t.hasClass("fsSection"),r=t.find("input,select,textarea"),a=0;a<r.length;a++){var s=r[a];if($(s).parent().is(".fsMatrixCol1")||$(s).parent().is(".fsMatrixCol2")){var n=t.parent(),o=s.id.indexOf("-"),l=s.id.substring(0,o),d=document.getElementById("matrix-"+l+"-fieldset");a+=$(d).find("input,select,textarea").length-1,"disabled"===$(d).attr("disabled")&&($(d).disabled=""),t.hasClass("fsHidden")&&(t.removeClass("fsHidden"),n.removeClass("fsHidden")),t.hasClass("fsPage")&&t.children(".fsFirstSection").removeClass("fsHidden"),this.hasHiddenParents(s.id)||(d.disabled=!1)}else if(!0===s.disabled||$(t).is(".fsHidden, .fsHiddenPage")){var c=this.getFieldId(s);if(i)if(t.removeClass("fsHidden"),$(this.getLogicTarget(c)).hasClass("fsHidden"))continue;t.removeClass("fsHidden"),t.hasClass("fsPage")&&t.children(".fsFirstSection").removeClass("fsHidden"),t.parent().removeClass("fsHidden"),this.hasHiddenParents(s.id)||t.hasClass("fsReadOnly")&&"creditcard"===t.attr("fs-field-type")||(s.disabled=!1),this.updateCalculations(c),this.updateDateCalculations(c),this.checkLogic(c),this.checkFormat(s)}}var u=t.find(".fsSignature");for(a=0;a<u.length;a++)$(u[a]).empty(),$(u[a]).jSignature();r.length<=0&&(t.removeClass("fsHidden"),t.hasClass("fsPage")&&t.children(".fsFirstSection").removeClass("fsHidden"),t.parent().removeClass("fsHidden")),-1!=this.logicFields.indexOf(e)&&this.checkLogic(e)}},Formstack.Form.prototype.hideFields=function(e){var t=$(this.getLogicTarget(e)),i=t.find("input:disabled,select:disabled,textarea:disabled"),r=t.find("input,select,textarea");if(!(t.is(".fsHidden, .fsHiddenPage")&&i.length==r.length&&0<r.length)){for(var a=0;a<r.length;a++){var s=r[a],n=$(s).parent().is(".fsHiddenByFieldSetting");if(!n&&$(s).parent().is(".fsSubField")?n=$(s).parents(".fsSubFieldGroup").is(".fsHiddenByFieldSetting"):!n&&$(s).parent().is(".fsOptionLabel")&&(n=$(s).parent().parent().is(".fsHiddenByFieldSetting")),!($(s).parent().is(".fsHidden")&&!0===s.disabled||n))if($(s).parent().is(".fsMatrixCol1")||$(s).parent().is(".fsMatrixCol2")){var o=s.id.indexOf("-"),l=s.id.substring(0,o),d=document.getElementById("matrix-"+l+"-fieldset");a+=$(d).find("input,select,textarea").length-1,$(d).attr("disabled")&&"disabled"==$(d)||$(d).attr("disabled","disabled"),t.hasClass("fsHidden")||t.addClass("fsHidden")}else!1===s.disabled&&(s.disabled=!0,this.updateCalculations(this.getFieldId(s)),this.updateDateCalculations(this.getFieldId(s)),this.checkLogic(this.getFieldId(s))),t.hasClass("fsHidden")||t.addClass("fsHidden")}if(r.length<=0&&!t.hasClass("fsHidden")&&t.addClass("fsHidden"),t.hasClass("fsCell")){var c=t.siblings(".fsCell"),u=t.siblings(".fsCell.fsHidden");if(c&&u&&u.length===c.length){var m=t.parent();m&&m.addClass("fsHidden")}}-1!=this.logicFields.indexOf(e)&&this.checkLogic(e)}},Formstack.Form.prototype.getCalculation=function(e){for(var t=0;t<this.calculations.length;t++){var i=this.calculations[t];if(0<=i.fields.indexOf(e))return i}return null},Formstack.Form.prototype.getCalculationByTarget=function(e){for(var t=0;t<this.calculations.length;t++){var i=this.calculations[t];if(i.target==e)return i}return null},Formstack.Form.prototype.updateCalculations=function(e){for(var t=("object"==typeof e&&"target"in e?this.getFieldId(e.target):e.toString()),i=0;i<this.calculations.length;i++){for(var r=this.calculations[i],a=[],s=0,n=r.fields.length;s<n;s++){var o=r.fields[s].match(/(\d+)/);o?a.push(o[0]):a.push(r.fields[s])}0<=a.indexOf(t)&&this.evalCalculation(r)}this.plugins.discountCode&&t==this.plugins.discountCode.total_field&&(this.plugins.discountCode.discountClick?this.plugins.discountCode.discountClick=!1:this.plugins.discountCode._clearDiscount("re-calculation of total field"))},Formstack.Form.prototype.updateDateCalculations=function(e){for(var t=("object"==typeof e&&"target"in e?this.getFieldId(e.target):e.toString()),i=0,r=this.dateCalculations.length;i<r;i++)for(var a=this.dateCalculations[i],s=0,n=a.fields.length;s<n;s++){var o="current_date"!==a.fields[s]&&a.fields[s].match(/(\d+)/);if((o?o[0]:a.fields[s])===t){this.evalDateCalculation(a);break}}},Formstack.Form.prototype.evalCalculation=function(calc){var equation=calc.equation,unit="",largestDecimal=0,length,i,decimals,field,splitEquation=equation.split(" ");for(i=0,length=splitEquation.length;i<length;i++){var currentValue=splitEquation[i];isFinite(currentValue)&&(decimals=this.getDecimals(currentValue),largestDecimal=largestDecimal<decimals?decimals:largestDecimal)}for(i=0,length=calc.fields.length;i<length;i++){var id=calc.fields[i],additionalCalc=id.match("-([a-z]+)?");additionalCalc&&(id=id.substring(0,id.length-additionalCalc[0].length),additionalCalc=additionalCalc[1]);var regex=new RegExp("\\["+calc.fields[i]+"\\]","g"),val=0;decimals=NaN;for(var fields=this.getFields(id),fLength=fields.length,j=0;j<fLength;j++){field=fields[j];var properties=this.getNumberProperties(field),calcInfo=this.getCalcInfo(this.getFieldId(field),additionalCalc);val=calcInfo.sum,isFinite(val)||(val=0),decimals="number"===field.type?properties.decimals:calcInfo.decimals,val&&-1!=val.toString().indexOf("$")&&(unit="$")}decimals=isNaN(decimals)?0:decimals,equation=equation.replace(regex,val.toFixed(decimals)),largestDecimal=largestDecimal<decimals?decimals:largestDecimal}if(field=document.getElementById("field"+calc.target),null!==field){var targetProperties=this.getNumberProperties(field),targetDecimals=targetProperties.decimals,result=0;"number"!==field.type&&(targetDecimals=largestDecimal),targetDecimals=isNaN(targetDecimals)?0:targetDecimals,equation="("+equation+").toFixed("+targetDecimals+")";try{result=eval(equation)}catch(e){}if(isFinite(result)||(result=0),field=document.getElementById("field"+calc.target),null!==field){var old_value=field.value;$(field).hasClass("fsFormatNumber")?(field.value=result,this.checkFormat(field)):field.value=unit+result,jQuery(field).trigger("calceval"),field.value!=old_value&&(this.checkLogic(calc.target),this.updateCalculations(calc.target),this.updateDateCalculations(calc.target))}}},Formstack.Form.prototype.getDateFieldTimestamp=function(e){var t=document.getElementById(e+"Y"),i=document.getElementById(e+"M"),r=document.getElementById(e+"D");if(t&&i&&!t.disabled){var a=t.options[t.selectedIndex].value,s=i.selectedIndex,n=r?r.selectedIndex:1;return!a||!s||r&&!n?void 0:new Date(a,s-1,n)}},Formstack.Form.prototype.initDateFieldTimestamp=function(e){return"current_date"===e?Formstack.Util.getStartOfCurrentDate():this.getDateFieldTimestamp("field"+e)},Formstack.Form.prototype.evalDateCalculation=function(e){if(e){var t=document.getElementById("field"+e.target),i=!1;t||(i=!!(t=document.getElementById("fsCalendar"+e.target+"Link")));var r,a=this.initDateFieldTimestamp(e.fields[0]),s="";if(t||(i=!!(t=document.getElementById("fsCalendar"+e.target+"Link"))),a)if("number"===e.type){var n=this.getFields(e.fields[1])[0];n&&n.value&&!n.disabled&&"number"==typeof(r=this.getNumber(n.value))&&(s=this.computeDateDiff(a,r,e,i))}else(r=this.initDateFieldTimestamp(e.fields[1]))&&(s=this.computeDateDuration(a,r,e.units,e.allowNegatives));if(null!==t){var o=t.value;i?this.updateDateFieldValue(e.target,s):t.value=s,jQuery(t).trigger("calceval"),t.value!==o&&(this.checkLogic(e.target),this.updateCalculations(e.target),this.updateDateCalculations(e.target))}}},Formstack.Form.prototype.updateDateFieldValue=function(e,t){if(t instanceof Date==!1||isNaN(t.valueOf()))for(var i=["Y","M","D"],r=0;r<3;r++){var a=document.getElementById("field"+e+i[r]);a&&(a.selectedIndex=0)}else{var s="fsCalendar"+e+"Link";this.calendarSelect(this.getCalendarFormat(e).replace("yy",t.getFullYear()).replace("mm",t.getMonth()+1).replace("dd",t.getDate()),{id:s,input:document.getElementById(s)})}},Formstack.Form.prototype.computeDateDiff=function(e,t,i,r){if(e&&"number"==typeof t){var a,s,n="plus"===i.equation?"+":"-";if(-1===((0<t)-(t<0)||+t)&&(t=Math.abs(t),n="+"===n?"-":"+"),a=this.adjustTimestamp(e,i.units,parseFloat(n+t)),r)return a;if("current_date"===i.fields[0])s=a.getMonth()+1+"-"+a.getDate()+"-"+a.getFullYear();else{var o=i.fields[0];s=this.formatDateLikeField(a,o)}return s}},Formstack.Form.prototype.updateMonths=function(e,t){var i=e.getMonth()+t,r=new Date(e.getFullYear(),i+1,0);r.setHours(0,0,0,0);var a=r.getDate();e.setMonth(i,Math.min(a,e.getDate()))},Formstack.Form.prototype.adjustTimestamp=function(e,t,i){return"years"===(t=t.toLowerCase())?this.updateMonths(e,12*i):"months"==t?this.updateMonths(e,i):e.setDate(e.getDate()+i),e},Formstack.Form.prototype.computeDateDuration=function(e,t,i,r){var a,s=!1;if(t<e){var n=e;e=t,t=n,s=r}switch(i=i.toLowerCase()){case"years":a=this.durationInYears(e,t);break;case"months":a=this.durationInMonths(e,t);break;default:a=this.durationInDays(e,t)}return s&&(a*=-1),a},Formstack.Form.prototype.durationInYears=function(e,t){var i=t.getFullYear()-e.getFullYear(),r=t.getMonth()-e.getMonth(),a=t.getDate()-e.getDate(),s=Math.abs(i);return 0<i&&(r<0||0===r&&a<0)&&s--,s},Formstack.Form.prototype.durationInMonths=function(e,t){var i=Math.abs(e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear()));return t.getDate()-e.getDate()<0&&i--,i},Formstack.Form.prototype.durationInDays=function(e,t){var i=e.getTimezoneOffset()-t.getTimezoneOffset();return 0!==i&&(t=new Date(t.getTime()+60*i*1e3)),Math.floor(Math.abs((e-t)/864e5))},Formstack.Form.prototype.formatDateLikeField=function(t,i){var r=this,e=this.getDateFieldFormat(i),a=new RegExp("("+["YY","Y","y","F","M","m","d"].join("|")+")");return e.split(a).map(function(e){switch(e){case"YY":case"Y":return t.getFullYear();case"y":return t.getFullYear().toString().slice(-2);case"F":case"M":return r.getDateFieldMonthName(i,t.getMonth()+1);case"m":return("00"+(t.getMonth()+1)).slice(-2);case"d":return("00"+t.getDate()).slice(-2)}return e}).join("")},Formstack.Form.prototype.getDateFieldFormat=function(e){return jQuery("#field"+e+"Format").data("dateFormat")},Formstack.Form.prototype.getDateFieldMonthName=function(e,t){return jQuery("#field"+e+"M").children().eq(t).text()},Formstack.Form.prototype.updateProgress=function(e){var t=document.getElementById("fsProgress"+this.id);if(t){var i=$("div.fsPage").length;if(i<=1)t.style.display="none";else{var r=document.getElementById("fsProgressBarContainer"+this.id),a=document.getElementById("fsProgressBar"+this.id),s=e/i;s<0&&(s=0),1<s&&(s=1);var n=100*s+"%";$(r).attr("aria-valuenow",Math.floor(100*s));var o="Page "+e+" of "+i;$(r).attr("aria-valuetext",o),$(a).css("width",n)}}},Formstack.Form.prototype.pageIsVisible=function(e){if((e=$("#fsPage"+this.id+"-"+e)).hasClass("fsHidden"))return!1;for(var t=e.find("div.fsSection"),i=0;i<t.length;i++){var r=$(t[i]);if(!r.hasClass("fsHidden"))for(var a=r.find("div.fsCell"),s=0;s<a.length;s++)if(!$(a[s]).hasClass("fsHidden"))return!0}return!1},Formstack.Form.prototype.calendarShow=function(e,t){var i=e.id.match(/(\d+)/);i=i[1];var r=new Date,a=document.getElementById("field"+i+"M"),s=a&&a.selectedIndex?a.selectedIndex:r.getMonth()+1,n=document.getElementById("field"+i+"D"),o=n&&n.selectedIndex?n.selectedIndex:r.getDate(),l=document.getElementById("field"+i+"Y"),d=r.getFullYear();l&&l.selectedIndex&&(d=parseInt(l.options[l.selectedIndex].value,10))<100&&(d+=2e3);var c=$(e).datepicker("option","dateFormat");c=(c=(c=c.replace("mm",s)).replace("dd",o)).replace("yy",d),$(e).datepicker("setDate",c)},Formstack.Form.prototype.calendarSelect=function(e,t){var i=t.id.match(/(\d+)/);i=i[1];var r=$(t.input).datepicker("option","dateFormat"),a=e.split("/"),s=a[2],n=a[0],o=a[1];"dd/mm/yy"==r?(s=a[2],n=a[1],o=a[0]):"yy/mm/dd"==r?(s=a[0],n=a[1],o=a[2]):"mm/yy/dd"==r&&(s=a[1],n=a[0],o=1);var l=document.getElementById("field"+i+"M");l&&(l.selectedIndex=n);var d=document.getElementById("field"+i+"D");d&&(d.selectedIndex=o);var c=document.getElementById("field"+i+"Y");if(c)for(var u=1;u<c.options.length;u++){var m=parseInt(c.options[u].value,10);if(m<100&&(m+=2e3),m==s){c.selectedIndex=u;break}}$(c).trigger("change")},Formstack.Form.prototype.textareaCharLimiter=function(e,t){var i=jQuery("#field"+e),r=jQuery("#fsCounter"+e),a=i.val(),s=a.match(/(\r\n|\n|\r)/g),n=s?s.length:0,o=a.length+n;r.text(t-o+"/"+t),t<o&&i.val(a.substr(0,t-n))},Formstack.Form.prototype.getFields=function(e,t){"string"!=typeof e&&(e=String(e)),void 0===t&&(t=!1),e=(e=e.replace("field","")).replace("[]","");var i=document.getElementsByName("field"+e),r=document.getElementsByName("field"+e+"[]"),a=document.getElementById("field"+e+"M"),s=document.getElementById("field"+e+"H");if(i.length<=0&&(i=0<r.length?r:t&&(a||s)?$("#fsCell"+e).find("select.fsField"):$(".field"+e+"Subfield")),0<i.length&&null!==document.getElementById("field"+e+"_othervalue")){var n=document.getElementById("field"+e+"_othervalue");this.forLogic?i[i.length-1].value="Other":i[i.length-1].value=n.value}return 0<i.length?i:document.getElementsByName("field"+e+"[]")},Formstack.Form.prototype.getFieldId=function(e){var t="string"==typeof(e="object"!=typeof e?e.toString():e)?e:e.name.replace("field","");return null===t?"":null===(t=t.match(/[0-9]+/))?"":t[0]},Formstack.Form.prototype.saveIncomplete=function(e){var t=document.getElementById("fsSaveResumePassword"+this.id),i={},r="",a=document.getElementById("saveAndResume"),s=document.getElementById("saveResumeProcess"),n=a&&a.innerHTML?a.innerHTML:"Save and Resume Later",o=s&&s.innerHTML?s.innerHTML:"Save and get link";if(i.title=n,i.confirm=o,t){var l=document.getElementById("resumeConfirmPassword");r=l&&l.innerHTML?l.innerHTML:"Are you sure you want to leave this form and resume later? If so, please enter a password below to securely save your form.",i.goodies=["password"]}else{var d=document.getElementById("resumeConfirm");r=d&&d.innerHTML?d.innerHTML:"Are you sure you want to leave this form and resume later?"}i.message=r,this.launchDialog(i,this.processSaveIncomplete,!1)},Formstack.Form.prototype.processSaveIncomplete=function(e){var t=document.getElementById("fsSaveResumePassword"+this.id),i=document.getElementById("fsForm"+this.id);if(t){if(e&&!e.password)return;var r=document.getElementById("incomplete_password"+this.id);r||((r=document.createElement("input")).type="hidden",r.name="incomplete_password",r.id="incomplete_password"+this.id,i.appendChild(r)),r.value=e.password}var a=document.getElementsByTagName("fieldset");if(a&&0<a.length)for(var s=0,n=a.length;s<n;s++){var o=a[s].id.match(/[0-9]+/);if(o&&(o=o[0],document.getElementById("field"+o+"_othervalue"))){var l=document.getElementById("field"+o+"_other");l&&(l.value="Other")}}return document.getElementById("incomplete"+this.id).value="true",i.submit(),!1},Formstack.Form.prototype.getParameterByName=function(e,t){e=e.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null},Formstack.Form.prototype.checkFreeLink=function(){var e,t=document.getElementById("fsForm"+this.id);if(!$(t).hasClass("fsFormFree"))return!0;switch(document.getElementById("referrer_type"+this.id).value){case"iframe":e=window.parent.document;break;case"js":e=window.document;break;default:return!0}for(var i=!1,r=e.getElementsByTagName("a"),a=0;a<r.length;a++)if(0===r[a].href.indexOf("http://www.formspring.com/")||0===r[a].href.indexOf("http://www.formstack.com/")){i=!0;break}if(i)return!0;var s=document.getElementById("embedError"),n=s?s.innerHTML:"There was an error displaying the form. Please copy and paste the embed code again.";return this.showError(n),!(t.style.display="none")},Formstack.Form.prototype.checkMatrixOnePerColumn=function(r){var e=r.split("-"),a=e[0],s=(e[1],e[2]);$("#matrix-"+a+" input").each($.proxy(function(e,t){var i=new RegExp("^"+a+"-\\d+-"+s+"$");t.id!=r&&i.test(t.id)&&(t.checked=!1)},this))},Formstack.Form.prototype.onChange=function(){},Formstack.Form.prototype.getCalcInfo=function(e,t){for(var i=this.getFields(e),r=0,a=0,s=0,n=i.length;s<n;s++){var o=i[s],l=0,d=0;if(!o.disabled||this.isWorkflowForm&&!this.belongsToHiddenWorkflowSection(o)){if("product-quantity"===$(o).attr("data-type")){var c=$(o),u=c.attr("data-product-price"),m=c.val(),f=this.getNumber(u),h=this.getNumber(m);d=this.getDecimals(u),"price"===t&&!isNaN(f)&&0<f?r+=f:"quantity"===t?(r+=h,d=this.getDecimals(m)):!isNaN(f)&&0<f&&(r+=f*h)}else if("radio"===o.type||"checkbox"===o.type)l=o.checked?o.value:0,r+=this.getNumber(l),d=this.getDecimals(l);else if("select-multiple"===o.type)for(var p=0,g=o.options.length;p<g;p++){var v=o.options[p];if(v.selected){l=v.value;var y=this.getNumber(l),F=this.getDecimals(l);isNaN(y)||(r+=y),d=d<F?F:d}}else l="select-one"===o.type?o.options[o.selectedIndex].value:o.value,r+=this.getNumber(l),d=this.getDecimals(l);l=0,a=a<d?d:a}}return{sum:r,decimals:a}},Formstack.Form.prototype.getNumber=function(e){if(""===$.trim(e))return 0;var t=parseFloat(e);return isNaN(t)?parseFloat(e.replace(/[^\d\.\-]/g,"")):t},Formstack.Form.prototype.getDecimals=function(e){var t=(e+"").split("."),i=NaN;return 2===t.length&&(i=t[1].length),i<0&&(i=0),20<i&&(i=20),i},Formstack.Form.prototype.emitSubmitMessage=function(){this.emitSubmitMessageToWindow(window.parent),this.emitSubmitMessageToWindow(window.opener)},Formstack.Form.prototype.emitSubmitMessageToWindow=function(e){e&&e.postMessage&&e.postMessage("fs-form-submit","*")},Formstack.Form.prototype.submit=function(e){if(!this.checkForm())return!1;if(jQuery("#fsCaptcha"+this.id).length&&""===jQuery("#recaptcha_response_field").val())return jQuery("#fsCaptcha"+this.id).addClass("fsValidationError"),!1;var t=$("input.fsSubmitButton"),i=t.length?t[0]:null;if($(".fsFieldValidating","#fsForm"+this.id).length){if(i){var r=document.getElementById("validatingText");i.value=r&&r.innerHTML?r.innerHTML+"...":"Validating..."}return this.skipValidation=!0,setTimeout($.proxy(function(){this.form.submit()},this),100),!1}if(!this.processIntegrations("payment"))return!1;if(this.skipValidation=!1,this.jsonp)return this.jsonpSubmit(),!1;if(this.form.trigger("form:submit"),i){var a=document.getElementById("submittingText");i.value=a&&a.innerHTML?a.innerHTML+"...":"Submitting..."}return jQuery(".g-recaptcha").length?(grecaptcha.execute(),!1):(this.emitSubmitMessage(),!0)},Formstack.Form.prototype.processIntegrations=function(e){var t=e+"Integrations";if("object"!=typeof this[t])return!0;var i=0;for(var r in this[t])if(this[t].hasOwnProperty(r)){if("error"===this[t][r].key)return!1;if(!this[t][r].success&&void 0!==this[t][r].success)return!1;if(!this[t][r].success){var a="prepare"+r.charAt(0).toUpperCase()+r.slice(1);"function"==typeof this[a]&&(this[a](),i++)}}return!i},Formstack.Form.prototype.checkIntegrationsComplete=function(e){var t=e+"Integrations";if("object"==typeof this[t]){for(var i in this[t])if(this[t].hasOwnProperty(i)&&!this[t][i].success)return;switch(e){case"payment":this.form.submit()}}},Formstack.Form.prototype.checkForm=function(){if(this.skipValidation)return!0;var e,t,i=!0;if(this.skipPageValidation){var r=!1,a=1;for(e=1,t=this.pages;e<=t;e++)(i=this.checkPage(e))||r||(r=!0,a=e);if(r)return void this.changePage(this.currentPage,a)}else i=this.checkPage(this.currentPage);if(i){var s=[],n=$("#fsForm"+this.id+" .fsRequired").get();for(e=0;e<n.length;e++){var o=n[e],l=$(o).parents(".fsMatrixFieldset"),d=void 0!==l[0]&&"disabled"===$(l[0]).attr("disabled");if(o.disabled||d)if(0<=o.id.indexOf("_")){var c=o.id.split("_");s.push(c[0])}else s.push(o.name)}return document.getElementById("hidden_fields"+this.id)&&(document.getElementById("hidden_fields"+this.id).value=s.join(",")),!0}return this.form.trigger("form:validation-error"),!1},Formstack.Form.prototype.getWorkflowStepAccess=function(e){var t=this.workflowFields[parseInt(e,10)].section;return this.workflowSections[t].workflowAccess},Formstack.Form.prototype.checkLogic=function(e){for(var t=("object"==typeof e&&"target"in e?this.getFieldId(e.target):this.getFieldId(e)),i=0;i<this.checks.length;i++)if(!(this.checks[i].fields.indexOf(t)<0)){var r,a=this.checks[i],s=!1;this.forLogic=!0;for(var n=0;n<a.checks.length;n++){switch((r=a.checks[n]).condition){case"dateIsEqual":s=this.isDateEqual(r.field,r.option);break;case"dateIsNotEqual":s=!this.isDateEqual(r.field,r.option);break;case"dateAfter":s=this.isDateAfter(r.field,r.option);break;case"dateBefore":s=this.isDateBefore(r.field,r.option);break;case"dateIsBetween":s=this.isDateBetween(r.field,r.option);break;case"dateIsNotBetween":s=!this.isDateBetween(r.field,r.option);break;case"dateIsWithin":s=this.isDateWithin(r.field,r.option);break;case"dateIsNotWithin":s=!this.isDateWithin(r.field,r.option);break;case"gt":s=this.isFieldGreaterThan(r.field,r.option);break;case"lt":s=this.isFieldLessThan(r.field,r.option);break;case"!=":s=!this.isFieldEqual(r.field,r.option);break;default:s=this.isFieldEqual(r.field,r.option)}if("AND"==a.bool&&!s)break;if("OR"==a.bool&&s)break}s&&"Show"==a.action||!s&&"Hide"==a.action?(this.showFields(a.target),this.fireLogicEvents&&this.form.trigger("logic:changed",{target:a.target,type:"show"})):(this.hideFields(a.target),this.fireLogicEvents&&this.form.trigger("logic:changed",{target:a.target,type:"hide"})),s&&"Show"==a.action&&this.belongsToHiddenWorkflowSection(r.field)&&(this.hideFields(a.target),this.fireLogicEvents&&this.form.trigger("logic:changed",{target:a.target,type:"hide"}))}this.forLogic=!1,this.initializing||this.checkNavigation()},Formstack.Form.prototype.getFieldValues=function(e,t){for(var i=new Array,r=this.getFields(e),a=0;a<r.length;a++){var s=r[a];if(!s.disabled||this.isReadOnlyWorkflowInput(s))if("checkbox"===s.type||"radio"===s.type)s.checked&&i.push(s.value);else if("select-multiple"===s.type)for(var n=0;n<s.options.length;n++)s.options[n].selected&&i.push(s.options[n].value);else"product-quantity"!==$(s).data("type")||0!==s.selectedIndex||t?i.push(s.value):s.options&&s.options.length&&"--"===s.options[0].text&&i.push("0")}return i},Formstack.Form.prototype.belongsToHiddenWorkflowSection=function(e){var t=$(e).closest(".fsCell");return t.hasClass("fsWorkflowHidden")&&!t.hasClass("fsWorkflowReadOnly")},Formstack.Form.prototype.isReadOnlyWorkflowInput=function(e){var t=$(e).closest(".fsCell");return!t.hasClass("fsWorkflowHidden")&&t.hasClass("fsWorkflowReadOnly")},Formstack.Form.prototype.isFieldEqual=function(e,t){return-1!=this.getFieldValues(e).indexOf(t)},Formstack.Form.prototype.getTimestampFromDefaultDatePattern=function(e){var t=e.split("-"),i=new Date(parseInt(t[2],10),parseInt(t[0],10)-1,parseInt(t[1],10));return i.setHours(0,0,0,0),i},Formstack.Form.prototype.isDateAfter=function(e,t){var i=this.getDateFieldTimestamp("field"+e);if(i)return i.getTime()>this.getTimestampFromDefaultDatePattern(t).getTime()},Formstack.Form.prototype.isDateBefore=function(e,t){var i=this.getDateFieldTimestamp("field"+e);if(i)return i.getTime()<this.getTimestampFromDefaultDatePattern(t).getTime()},Formstack.Form.prototype.isDateBetween=function(e,t){var i=this.getDateFieldTimestamp("field"+e);if(i){var r=t.split(","),a=this.getTimestampFromDefaultDatePattern(r[0]).getTime(),s=this.getTimestampFromDefaultDatePattern(r[1]).getTime();if(s<a){var n=a;a=s,s=n}return a<=i.getTime()&&i.getTime()<=s}},Formstack.Form.prototype.isDateWithin=function(e,t){if(e&&t){var i=this.getDateFieldTimestamp("field"+e);if(i){var r=t.match(/(\d+)\s+(\w+)/);if(r&&!(r.length<3)){var a=parseInt(r[1],10),s=r[2].toLowerCase(),n=Formstack.Util.getStartOfCurrentDate(),o=0;return i<n?o=1:n<i&&(o=-1),i.setDate(i.getDate()+o),this.computeDateDuration(n,i,s,!1)<a}}}},Formstack.Form.prototype.isDateEqual=function(e,t){if(e&&t){var i=this.getDateFieldTimestamp("field"+e);if(i)return i.getTime()===this.getTimestampFromDefaultDatePattern(t).getTime()}},Formstack.Form.prototype.isFieldGreaterThan=function(e,t){var i=this.getFields(e);return i&&1==i.length&&"SELECT"==i[0].nodeName?parseInt(this.getFieldValues(e)[0])>t:this.getCalcInfo(e).sum>t},Formstack.Form.prototype.isFieldLessThan=function(e,t){var i=this.getFields(e);return i&&1==i.length&&"SELECT"==i[0].nodeName?parseInt(this.getFieldValues(e)[0])<t:this.getCalcInfo(e).sum<t},Formstack.Form.prototype.hasAlreadyFailedValidation=function(e){var t=!1,i=this.getFieldContainer(e);return-1!=this.failedContainers.indexOf(i)&&(t=!0),t},Formstack.Form.prototype.checkRequired=function(e,t,i){var r=this.getFieldId(e);if(!this.validate||0<=location.search.indexOf("no_req"))return!0;if(null!==t&&t&&-1===document.getElementById("fsCell"+r).className.indexOf("fsValidationError"))return!0;var a,s,n=!1,o=!0;if(this.isWorkflowForm&&"write"!==this.getWorkflowStepAccess(r))return!0;if(!e.disabled){if($(e).hasClass("fsRequired")){var l=e.name.substr(0,e.name.indexOf("-")),d=document.getElementById("matrix-"+l),c=$(e).val(),u=$(e).siblings(".fsSignature");if(null!==d){for(var m=d.getElementsByTagName("input"),f=new Array(!1),h=0;h<m.length;h++){var p=!1,g=m[h],v=g.type.toLowerCase();if("radio"===v||"checkbox"===v){if("radio"===v&&(p=!0,o=this.checkValidValue(g)),!o&&!$(d).hasClass("fsMatrixOnePerColumn"))break;var y=parseInt(m[h].id.substr(m[h].id.lastIndexOf("-")+1))-1;null!==f[y]&&void 0!==f[y]||(f[y]=!1),m[h].checked&&(f[y]=!0)}}if($(d).hasClass("fsMatrixOnePerColumn")){for(o=!0,a=0,s=f.length;a<s;a++)if(!1===f[a]){o=!1;break}}else if(!p)for(o=!1,a=0,s=f.length;a<s;a++)if(!0===f[a]){o=!0;break}}else if(null!==c&&0<=c.indexOf("data:image/png;base64,")&&0<u.length){r=e.id.substr(String("field").length);var F=$("#signature"+r).jSignature("getData","native");o=!1;for(var k=0,b=F.length;k<b;k++)if(5<=F[k].x.length){o=!0;break}}else o=this.checkValidValue(e);if(!o){if(n=!0,$(e).hasClass("fsFieldAddress"))r=(r=e.id.split("-"))[0];i||this.failedContainers.push(this.getFieldContainer(e))}}o&&$(e).hasClass("fsUpload")&&((o=this.checkUpload(e))||(n=!0)),i||this.highlightField(e,!o)}if(!i&&n){var C=!t,I=document.getElementById("requiredFieldsError")?document.getElementById("requiredFieldsError").innerHTML:"Please fill in a valid value for all required fields";return this.showFieldsError(I,C),!1}return o},Formstack.Form.prototype.showError=function(e,t){$("#fsError"+this.id).remove();var i=document.createElement("div");i.id="fsError"+this.id,i.className="fsError",i.innerHTML=e,i.setAttribute("role","alert"),i.setAttribute("aria-live","assertive"),$(i).prependTo("#fsForm"+this.id),t&&Formstack.Util.scrollTo("#fsError"+this.id)},Formstack.Form.prototype.showFieldsError=function(e,t){var i=jQuery(".fsCell.fsValidationError").toArray().reduce(function(e,t,i,r){var a=i===r.length-1?"":",";return e+" <strong>"+jQuery(t).attr("fs-field-validation-name")+a+"</strong>"}," <br/>Fields: ");return this.showError(e+i,t)},Formstack.Form.prototype.hideError=function(){$("#fsError"+this.id).remove()},Formstack.Form.prototype.highlightField=function(e,t,i){var r=this.getFieldContainer(e);i||(i=""),t?($(r).addClass("fsValidationError"),$(e).attr("aria-invalid",!0)):($(r).removeClass("fsValidationError"),$(e).removeAttr("aria-invalid")),this.hasHtml5Validation&&e.setCustomValidity(i),jQuery(".fsValidationError").length||this.hideError()},Formstack.Form.prototype.getContainer=function(e,t){for(var i=e;i&&i.tagName&&"body"!=i.tagName.toLowerCase();){if($(i).hasClass(t))return i;i=i.parentNode}},Formstack.Form.prototype.getFieldContainer=function(e){return this.getContainer(e,"fsFieldCell")},Formstack.Form.prototype.validateNamePart=function(e){var t=document.getElementById(e);return!$(t).hasClass("fsRequired")||t.value.match(/\S/)},Formstack.Form.prototype.checkValidName=function(e){var t=e.id.split("-");return t=t[0],!(!document.getElementById(t+"-first").value.match(/\S/)||!document.getElementById(t+"-last").value.match(/\S/))&&this.validateNamePart(t+"-prefix")&&this.validateNamePart(t+"-suffix")&&this.validateNamePart(t+"-middle")&&this.validateNamePart(t+"-initial")},Formstack.Form.prototype.checkValidValue=function(e){var t=!1,i=this.getFieldId(e);switch(e.type.toLowerCase()){case"text":if($(e).hasClass("fsFieldName"))t=!this.checkValidName(e);else if($(e).is(".fsFieldAddress, fsFieldAddress2, .fsFieldCity, .fsFieldState, .fsFieldZip, .fsFieldCountry")){i=(i=e.id.split("-"))[0],t=!document.getElementById(i+"-address").value.match(/\S/)||!document.getElementById(i+"-city").value.match(/\S/);var r=jQuery("#"+i+"-zip");if(r.hasClass("fsFormatZipXX")||(t=t||!r.val().match(/\S/)),!t){var a=document.getElementById(i+"-state");t="select-one"==a.type.toLowerCase()?!a.options[a.selectedIndex].value.match(/\S/):!a.value.match(/\S/)}if(!t){var s=document.getElementById(i+"-country");s&&!s.options[s.selectedIndex].value.match(/\S/)&&(t=!0)}}else t=!e.value.match(/\S/);break;case"textarea":t=!e.value.match(/\S/);break;default:var n=this.getFieldValues(e.name,!0);this.isWorkflowForm&&(0<jQuery(e).parent().find(".fsSignatureValue").length||0<jQuery(e).parent().find(".fsFileValue").length)?t=!1:0!==n.length&&null!==n[0]&&""!==n[0]||(t=!0)}return!t},Formstack.Form.prototype.checkUpload=function(e){for(var t=!0,i=[],r=e.className.split(/\s+/),a=0;a<r.length;a++){var s=r[a];if(/^uploadTypes-/.test(s))i=s.split("-")[1].split(",")}for(a=0;a<i.length;a++)i[a]=i[a].toLowerCase();if(i.indexOf("*")<0&&e&&""!==e.value&&!e.disabled){var n=e.value.match(/\.(\w+)$/);if(!(t=!!(n&&0<=i.indexOf(n[1].toLowerCase())))){this.highlightField(e,!0);var o=document.getElementById("fileTypeAlert")?$("#fileTypeAlert").text():"You must upload one of the following file types for the selected field:";alert(o+i.join(", "))}}return t},Formstack.Form.prototype.checkFormat=function(e,t){var i="object"==typeof e&&"target"in e?e.target:e,r=this.getFieldContainer(i);if(this.onChange=!1,void 0!==t&&(this.onChange=!0),(""===i.value||i.disabled)&&!this.onChange&&-1===i.className.indexOf("fsFormatMaxDate"))return this.highlightField(i,!1),!0;if("radio"===i.type&&!i.checked&&!this.onChange)return this.highlightField(i,!1),!0;for(var a=i.className.split(/\s+/),s=!1,n=!1,o=0,l=a.length;o<l;o++)if(0===a[o].indexOf("fsFormat")){s=!0;var d="check"+a[o].slice(2),c=["checkFormatPhone"];if("function"==typeof this[d]){if(!(n=this[d](i)))break}else{for(var u=0,m=c.length;u<m;u++)if(0===d.indexOf(c[u])&&"function"==typeof this[c[u]]){n=this[c[u]](i);break}if(!n)break}}var f,h=!s||s&&n;return h&&s&&0<=i.className.indexOf("fsRequired")&&(r.className.indexOf("fsFieldFocused")<0||0<=r.className.indexOf("fsValidationError"))&&(f=!(h=this.checkRequired(i))),s&&(h||f||this.showFieldsError(document.getElementById("invalidFormatError")?document.getElementById("invalidFormatError").innerHTML:"Please ensure all values are in a proper format."),this.highlightField(i,!h)),h},Formstack.Form.prototype.checkFormatValidateReactField=function(e){var t="data-validation-message",i=$(this.getFieldContainer(e)),r=i.find("["+t+"]").attr(t);return i.find(".fsErrorLabel").text(r),""===r},Formstack.Form.prototype.checkFormatEmail=function(e){var t=null,i=!1,r=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;if(-1<e.id.indexOf("_confirm")?(t=e,e=document.getElementById(e.id.replace("_confirm","")),i=!0):(t=document.getElementById(e.id+"_confirm"))&&e.value&&t.value&&(i=!0),!(e.value||t&&t.value))return!0;if(t&&i){if(!t.value)return!1;if(t.value!=e.value)return!1;if(!t.value.match(r))return!1}return e.value.match(r)},Formstack.Form.prototype.checkFormatPhoneExternal=function(e){var t=this.getFieldContainer(e);if(!t)return!0;if($(t).hasClass("fsFieldValidating"))return!0;var i=$("#fsForm"+this.id).attr("action"),r=(this.id,e.value);if(!r||""===r)return!0;if("XX"==($(e).data("country")||"XX"))return!0;var a=i.substring(0,i.lastIndexOf("/"))+"/validate.php";return $(t).addClass("fsFieldValidating"),$.ajax({url:a,dataType:"jsonp",data:{f:this.id,field:this.getFieldId(e.id),value:e.value},success:this.onValidationResult.bind(this)}),!0},Formstack.Form.prototype.onValidationResult=function(e){if(e&&e.success&&e.field){var t=$("#field"+e.field);if(t&&t.length){var i=t[0],r=this.getFieldContainer(i);r&&($(r).removeClass("fsFieldValidating"),e.valid||this.highlightField(i,!0))}}},Formstack.Form.prototype.getPhoneParts=function(e,t){var i=e.toLowerCase().replace(/[^\dx]/g,""),r="";if(0<=i.indexOf("x")){var a=i.split("x");i=a[0],r=a[1]}return t||"1"==i.charAt(0)&&(i=i.slice(1)),[i,r]},Formstack.Form.prototype.checkFormatPhoneUS=function(e){if("undefined"!=typeof googlePhoneParser)return this.checkFormatPhone(e);var t=this.getPhoneParts(e.value),i=t[0],r=t[1];return 10==i.length&&(e.value="("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6,4),r.length&&(e.value+=" x"+r),!0)},Formstack.Form.prototype.checkFormatPhoneUK=function(e){if("undefined"!=typeof googlePhoneParser)return this.checkFormatPhone(e);var t=this.getPhoneParts(e.value),i=t[0],r=t[1];return"44"==i.substr(0,2)&&"0"!=(i=i.slice(2)).charAt(0)&&(i="0"+i),"0"==i.charAt(0)&&(10==i.length||11==i.length)&&("1"==i.charAt(1)&&("1"==i.charAt(2)||"1"==i.charAt(3))||"8"==i.charAt(1)?e.value=i.substr(0,4)+" "+i.substr(4,3)+" "+i.substr(7,i.length-7):"2"==i.charAt(1)||"3"==i.charAt(1)||"5"==i.charAt(1)?e.value=i.substr(0,3)+" "+i.substr(3,4)+" "+i.substr(7,i.length-7):e.value=i.substr(0,5)+" "+i.substr(5,i.length-5),r.length&&(e.value+=" x"+r),!0)},Formstack.Form.prototype.checkFormatPhoneAU=function(e){if("undefined"!=typeof googlePhoneParser)return this.checkFormatPhone(e);var t=this.getPhoneParts(e.value,!0),i=!0,r=t[0],a=t[1];"61"===r.substr(0,2)&&(r=r.slice(2)),9===r.length&&(r="0"+r);for(var s=["0","13","1300","18","1800"],n=!1,o=0,l=s.length;o<l;o++)if(r.substr(0,s[o].length)===s[o]){n=!0,"0"!==s[o]&&(i=!1);break}if(!n)return!1;if(-1===[6,10].indexOf(r.length))return!1;var d="";return d=i?"("+r.substr(0,2)+") "+r.substr(2,4)+" "+r.substr(6,4):6===r.length?r.substr(0,2)+" "+r.substr(2,2)+" "+r.substr(4,2):r.substr(0,4)+" "+r.substr(4,3)+" "+r.substr(7,3),a.length&&(d+=" x"+a),e.value=d,!0},Formstack.Form.prototype.checkFormatPhoneXX=function(e){return"undefined"!=typeof googlePhoneParser?this.checkFormatPhone(e):/\d{3,}/.test(e.value)},Formstack.Form.prototype.checkFormatPhone=function(e){if("undefined"==typeof googlePhoneParser)return this.checkFormatPhoneXX(e);var t=$(e).data("country")||"XX";if("XX"==t)return/\d{3,}/.test(e.value);"UK"==t&&(t="GB");var i=googlePhoneParser(e.value,t);if(!i||!i.valid)return!1;var r=$(e).data("format")||"national";return e.value=i[r]||e.value,!0},Formstack.Form.prototype.checkFormatZipUS=function(e){var t=e.value.replace(/^\s+/,"").replace(/\s+$/,"");return!!t.match(/^\d{5}(?:\-\d{4})?$/)&&(e.value=t,!0)},Formstack.Form.prototype.checkFormatZipXX=function(e){return!0},Formstack.Form.prototype.checkFormatZipCA=function(e){var t=e.value.replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s{2,}/," ").toUpperCase();return 6!=t.length||t.match(/\s/)||(t=t.substr(0,3)+" "+t.substr(3,3)),!!t.match(/^[A-Z]\d[A-Z] \d[A-Z]\d$/)&&(e.value=t,!0)},Formstack.Form.prototype.checkFormatZipUK=function(e){var t=e.value.replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s{2,}/," ").toUpperCase();return t.match(/\s/)||(t=t.substr(0,t.length-3)+" "+t.substr(t.length-3,3)),!!t.match(/^[A-Z]{1,2}[0-9R][0-9A-Z]? [0-9][ABD-HJLNP-UW-Z]{2}$/)&&(e.value=t,!0)},Formstack.Form.prototype.checkFormatZipAU=function(e){var t=e.value.replace(/^\s+/,"").replace(/\s+$/,"").toUpperCase();return!!t.match(/^\d{4}$/)&&(e.value=t,!0)},Formstack.Form.prototype.checkFormatMaxDate=function(e){var t=e.id.slice(0,-1),i=document.getElementById(t+"Y"),r=document.getElementById(t+"M"),a=document.getElementById(t+"D"),s=i.options[i.selectedIndex].value,n=r.selectedIndex,o=a?a.selectedIndex:1,l=document.getElementById(t+"MaxDate").value,d=-1<e.className.indexOf("fsRequired"),c=!s&&!n&&a&&!o;return 2===s.length&&(s="20"+s),!(!c||d)||!(!s||!n||a&&!o)&&new Date(s,n-1,o)<=new Date(l.replace(/-/g,"/"))},Formstack.Form.prototype.checkFormatNumber=function(e){var t=e.value.replace(/[^\d\.\-]/g,""),i=this.getNumberProperties(e),r=[],a=t.split(".");if(a[0]&&(r=a[0].match(/.{1,16}/g)),a[1]){if(r.length){var s=r[r.length-1].split(""),n=s.pop();n+="."+a[1],r[r.length-1]=s.join("")}else n="."+a[1];n=n.match(/.{1,16}/g),r.push(n[0])}for(var o=0,l=r.length;o<l;o++)if("-"!==r[[o]]&&isNaN(r[o]))return!1;if(!isNaN(i.min)&&t<i.min||!isNaN(i.max)&&t>i.max)return!1;var d="";if(isNaN(i.decimals))d=t;else for(o=0,l=r.length;o<l;o++)d+=o<l-1?r[o]:parseFloat(r[o]).toFixed(i.decimals)+"";return e.value=d,!0},Formstack.Form.prototype.checkFormatCreditCard=function(e){for(var t=e.value.replace(/\D/g,""),i=0,r=1,a=(e.value=t).length-1;0<=a;a--){var s=parseInt(t.charAt(a))*r;i+=9<s?s-9:s,r=1==r?2:1}return i%10==0&&(t.match(/^4/)?$(e).hasClass("fsAcceptVisa")&&(13==t.length||16==t.length):t.match(/^(?:51|52|53|54|55)/)?$(e).hasClass("fsAcceptMasterCard")&&16==t.length:t.match(/^(?:6011|622|64|65)/)?$(e).hasClass("fsAcceptDiscover")&&16==t.length:t.match(/^(?:34|37)/)?$(e).hasClass("fsAcceptAmex")&&15==t.length:t.match(/^(?:300|301|302|303|304|305|36|54|55)/)?$(e).hasClass("fsAcceptDiners")&&(14==t.length||16==t.length):!!t.match(/^35/)&&($(e).hasClass("fsAcceptJCB")&&16==t.length))},Formstack.Form.prototype.getNumberProperties=function(e){for(var t={min:NaN,max:NaN,decimals:NaN,currency:null,currencySymbol:null,currencyPrefix:null,currencySuffix:null},i=e.className.split(/\s+/),r=0;r<i.length;r++){var a,s=i[r];(a=s.match(/^fsNumberMin-([\-\d.]+)/))?t.min=parseFloat(a[1]):(a=s.match(/^fsNumberMax-([\-\d.]+)/))?t.max=parseFloat(a[1]):(a=s.match(/^fsNumberDecimals-([\d]+)/))?t.decimals=parseInt(a[1]):(a=s.match(/^fsNumberCurrency-([A-Z]+)/i))&&(t.currency=a[1])}if(t.currency){var n=document.getElementById(e.id+"CurrencyPrefix");n&&(t.currencyPrefix=n.innerHTML);var o=document.getElementById(e.id+"CurrencySuffix");o&&(t.currencySuffix=o.innerHTML),"dollar"===t.currency?t.currencySymbol="$":"euro"===t.currency?t.currencySymbol="&euro;":"pound"===t.currency?t.currencySymbol="&pound;":"yen"===t.currency?t.currencySymbol="&#165;":"baht"===t.currency?t.currencySymbol="&#x0E3F;":"ils"===t.currency?t.currencySymbol="&#x20AA;":"krone"===t.currency?t.currencySymbol="kr":"lira"===t.currency?t.currencySymbol="&#x20BA;":"ruble"===t.currency?t.currencySymbol="&#x20BD;":"yuan"===t.currency?t.currencySymbol="&#x5143;":"zloty"===t.currency&&(t.currencySymbol="z&#x0142;")}return t},Formstack.Form.prototype.generatePrePopulateLink=function(){var e=document.location.href;(e=e.replace("&admin_tools","")).indexOf("?")<0&&(e+="?");for(var t=$(".fsField"),i=0;i<t.length;i++){var r=t[i];if(!$(r).hasClass("fsFormatCreditCard")){var a=this.getValue(r);null!==a&&""!==a&&(name=null!==r.name?r.name:r.id,e+="&"+name+"="+encodeURIComponent(a))}}document.getElementById("form"+this.id+"PrePopulateLink").value=e,document.getElementById("form"+this.id+"PrePopulateDiv").style.display="block"},Formstack.Form.prototype.getValue=function(e){return e.disabled?null:"radio"==e.type||"checkbox"==e.type?e.checked?e.value:null:"select-one"==e.type?e.options[e.selectedIndex].value:e.value},Formstack.Form.prototype.setValue=function(e,t){var i=this.getFields(e,!0),r=t.split("\n"),a=null,s=document.getElementById("fsCalendar"+e),n=document.getElementById("field"+e+"H");if(!s&&!n||$.isNumeric(t)||(a=new Date(t),isNaN(a.getTime())&&(a=null)),0===i.length)for(var o=0;o<r.length;o++){if(0<(f=r[o]).indexOf(" = ")){var l=f.split(" = "),d=document.getElementById("field"+e+"-"+l[0]);null!==d&&(d.value=l[1])}}else for(o=0;o<i.length;o++){var c=i[o];if("file"!==c.type&&!jQuery("#signature"+e).length)if("radio"==c.type||"checkbox"==c.type)if(1<r.length)for(var u=0;u<r.length;u++){(f=r[u].split(" | "))[0]==c.value&&(c.checked=!0)}else c.value==r[0]&&(c.checked=!0);else if("select-multiple"==c.type||"select-one"==c.type)if(1<r.length)for(u=0;u<r.length;u++)for(var m=0;m<c.options.length;m++){var f;(f=r[u].split(" | "))[0]==c.options[m].value&&(c.options[m].selected=!0)}else if(null!==a){var h="field"+e,p=c.id.substring(h.length),g=c.options,v=g[g.length-1].value,y=null;t=null;switch(p){case"M":y=a.getMonth()+1;break;case"D":y=a.getDate();break;case"Y":var F=a.getFullYear(),k=new String(v);4===k.length?t=F:2===k.length&&(t=new String(F).substring(2));break;case"H":var b=13<c.length,C=a.getHours(),I=(t=C,"am"),x=document.getElementById(h+"A");b||(12<t?(t=C-12,I="pm"):0===t?t=12:12===t&&(I="pm"),x&&("am"===I?x.options[1].selected=!0:"pm"===I&&(x.options[2].selected=!0)));break;case"I":y=a.getMinutes()+1;break;case"S":y=a.getSeconds()+1}if(null!==y)g[y].selected=!0;else if(null!==t)for(u=0;u<c.options.length;u++)t==c.options[u].value&&(c.options[u].selected=!0)}else for(u=0;u<c.options.length;u++)r[0]==c.options[u].value&&(c.options[u].selected=!0);else c.value=t}},Formstack.Form.prototype.setFieldValue=function(e,t,i){null!==e&&("radio"===e.type||"checkbox"===e.type?e.checked=i:e.value=t,$(e).trigger("change"))},Formstack.Form.prototype.prefill=function(e){for(var t=0;t<e.length;t++)this.setValue(e[t].id,e[t].value)},Formstack.Form.prototype.copyFieldValue=function(e,t){for(var i=$(".fsField"),r=0;r<i.length;r++){var a=i[r];if(-1<a.id.indexOf("field"+e)){var s=a.id.replace("field"+e,""),n=document.getElementById("field"+t)||document.getElementById("field"+t+s);this.setFieldValue(n,a.value,a.checked)}}},Formstack.Form.prototype.determineLocation=function(){if(navigator.geolocation)try{navigator.geolocation.watchPosition(function(e){$('input[name="latitude"]').val(e.coords.latitude),$('input[name="longitude"]').val(e.coords.longitude)},function(e){},{enableHighAccuracy:!0,maximumAge:6e4,timeout:1e4})}catch(e){}},Formstack.Form.prototype.toggleValidation=function(e){this.validate?(this.validate=!1,$(e).html("Turn On Validation"),document.getElementById("fsSubmitButton"+this.id).disabled=!0):(this.validate=!0,$(e).html("Turn Off Validation"),document.getElementById("fsSubmitButton"+this.id).disabled=!1)},Formstack.Form.prototype.onPostSubmit=function(e){null!==e.message&&""!==e.message||(e.message="Thank You!");var t='<div align="center" style="font-size:16px;font-weight:bold;padding:25px;">';t+=e.message,t+="</div><br />",$("#fsForm"+this.id).html(t),this.emitSubmitMessage()},Formstack.Form.prototype.onSubmitError=function(e){e.error&&this.showError(e.error)},Formstack.Form.prototype.focusFirstError=function(){var e=$(".fsValidationError").first();if(e){var t=e.find('[aria-invalid="true"]').first();if(t)setTimeout(function(){t.focus()},1);else{var i=$(e).attr("id").replace("fsCell","");setTimeout(function(){$("#field"+i).focus()},1)}}},Formstack.Form.prototype.jsonpSubmit=function(){var e=document.getElementById("fsForm"+this.id),t=(this.id,document.createElement("script"));return t.src=e.action+"?jsonp&"+$(e).serialize()+"&nocache="+(new Date).getTime(),e.parentNode.insertBefore(t,e),!1},Formstack.Form.prototype.changePage=function(e,t){var i="fsPage"+this.id+"-",r=document.getElementById(i+e),a=document.getElementById(i+t),s=null;e<t?s="forward":t<e&&(s="reverse"),this.currentPage=t,this.updateProgress(this.currentPage),this.currentPage==this.pages||this.isLastPage(this.currentPage)?(null!==this.plugins.confirmationPage&&void 0!==this.plugins.confirmationPage&&this.plugins.confirmationPage.parsePage(),$("#fsCaptcha"+this.id).show(),$("#fsSubmitButton"+this.id).show(),$("#fsNextButton"+this.id).hide()):1==this.currentPage?$("#fsPreviousButton"+this.id).hide():$("#fsSaveIncomplete"+this.id).show(),"reverse"===s&&($("#fsCaptcha"+this.id).hide(),$("#fsSubmitButton"+this.id).hide());var n=this;$(r).fadeOut(200,function(){if($(r).addClass("fsHiddenPage"),n.skipPageValidation&&"forward"!==s||$(".fsError").hide(),"reverse"===s?$("#fsNextButton"+n.id).show():"forward"===s&&$("#fsPreviousButton"+n.id).show(),$(a).removeClass("fsHiddenPage"),$(a).show(),"forward"===s)for(var e=$(a).find(".fsSignature"),t=0;t<e.length;t++)$(e[t]).height()<=30&&($(e[t]).empty(),$(e[t]).jSignature());$("#fsHeaderImage").length<=0?$(document).scrollTop($(a).offset().top-Number($(".fsForm").css("margin-top").replace("px",""))):$(document).scrollTop($("#fsHeaderImage").offset().top),"reverse"===s?n.form.trigger("form:prev-page",n.currentPage):"forward"===s&&n.form.trigger("form:next-page",n.currentPage),$(a).find("input,textarea,select").filter(":visible:enabled:not([readonly])").first().focus()})},Formstack.Form.prototype.getIncompleteFields=function(e){var t="#fsForm"+this.id+" .fsField";!0===e&&(t+=".fsRequired");for(var i=$(t+=":not([disabled])"),r=[],a=i.length,s=0;s<a;s++)if(!this.checkRequired(i[s],!1,!0)){var n=this.getFieldId(i[s].id);r.push({id:n,field:i[s]})}return r},Formstack.Form.prototype.enableLogicEvents=function(){this.fireLogicEvents=!0},Formstack.Form.prototype.launchDialog=function(s,n,o){var l=document.querySelector(".fs-form-dialog");if(l){if(s.goodies&&s.goodies.length)for(var e=0,t=s.goodies.length;e<t;e++){var i=l.querySelector(".fs-form-dialog__"+s.goodies[e]);i.className=i.className.replace(" fs-form-dialog--hidden","")}var r,a;for(r in s)if(s.hasOwnProperty(r)&&"goodies"!==r&&(a=l.querySelector(".fs-form-dialog__"+r)))if("cancel"===r||"confirm"===r){a.setAttribute("title",s[r]);var d=a.querySelector(".fs-form-dialog__button-text");d&&(d.innerHTML=s[r])}else a.innerHTML=s[r];var c=function(e){e&&(e.preventDefault?e.preventDefault():e.returnValue=!1);var t={};if(s.goodies&&s.goodies.length)for(var i=0,r=s.goodies.length;i<r;i++){var a=l.querySelector(".fs-form-dialog__"+s.goodies[i]);t[s.goodies[i]]=a.value}n.apply(this,[t]),o&&u()}.bind(this),u=function(e){e&&(e.preventDefault?e.preventDefault():e.returnValue=!1),this.closeDialog(s.goodies,u,c)}.bind(this),m=l.querySelector(".fs-form-dialog__cancel"),f=l.querySelector(".fs-form-dialog__confirm");Formstack.Util.addEvent("click",m,u),Formstack.Util.addEvent("click",f,c),l.className=l.className.replace(" fs-form-dialog--hidden","")}else{var h;if(!(h=s.goodies?prompt(s.message):confirm(s.message)))return;if(s.goodies){var p=h;(h={})[s.goodies[0]]=p}n.apply(this,[h])}},Formstack.Form.prototype.closeDialog=function(i,e,t){var r=document.querySelector(".fs-form-dialog");if(r){r.className+=" fs-ngdialog-closing",setTimeout(function(){if(r.className.match("fs-form-dialog--hidden")||(r.className+=" fs-form-dialog--hidden"),r.className=r.className.replace(" fs-ngdialog-closing",""),i&&i.length)for(var e=0,t=i.length;e<t;e++){r.querySelector(".fs-form-dialog__"+i[e]).className+=" fs-form-dialog--hidden"}},550);var a=r.querySelector(".fs-form-dialog__cancel"),s=r.querySelector(".fs-form-dialog__confirm");Formstack.Util.removeEvent("click",a,e),Formstack.Util.removeEvent("click",s,t)}},Formstack.IOS={},Formstack.IOS.getRectById=function(e){var t=document.getElementById(e);if(t){var i=t.getBoundingClientRect();return"{{"+i.left+","+i.top+"}, {"+i.width+","+i.height+"}}"}return null},Formstack.IOS.base64EncodedUpload=function(e,t){var i=document.getElementById("field"+e),r=document.getElementById("field"+e+"-ios-button");return i?(r&&(r.innerHTML="Change file"),i.value=t,document.getElementById("field"+e+"Preview").src="data:image/jpeg;base64,"+t,1):0},Formstack.IOS.fileUpload=function(e){var t="ios://fileupload/"+e;window.location=t},Formstack.IOS.scanCreditCard=function(e){var t="ios://scancreditcard/"+e;window.location=t},Formstack.IOS.onCreditCard=function(e,t){var i=document.getElementById("field"+e);if(!i)return!1;i.value=t},Formstack.Android={},Formstack.Android.scanCreditCard=function(e){if(!window.formstackAndroidInterface)return!1;window.formstackAndroidInterface.onScanCreditcard(e)},Formstack.Android.onCreditCard=function(e,t){var i=document.getElementById("field"+e);if(!i)return!1;i.value=t},Formstack.Util={lcFirst:function(e){return e[0].toLowerCase()+e.slice(1)}},Formstack.Util.checkAll=function(el){for(var prefix=el.name.replace("_all","_"),i=1,e,checkboxes=document.getElementsByName(el.name.replace("_all","[]")),i=0;i<checkboxes.length;i++)e=checkboxes[i],e.checked=el.checked;var form=document.getElementsByName("form");form=form[0];var id=prefix.replace("field","");id=id.replace("_",""),eval("form"+form.value+".checkLogic("+id+")"),eval("form"+form.value+".updateCalculations("+id+")"),eval("form"+form.value+".updateDateCalculations("+id+")")},Formstack.Util.scrollTo=function(e){var t=$(e).offset(),i=$(e).css("margin-top"),r=$(e).css("margin-left");i=Number(i.replace("px","")),r=Number(r.replace("px","")),window.scroll(t.left-r,t.top-i)},Formstack.Util.getHeight=function(e){var t=$(e).height();return isNaN(t)?0:t},Formstack.Util.getWidth=function(e){var t=$(e).width();return isNaN(t)?0:t},Formstack.Util.getStartOfCurrentDate=function(){var e=new Date;return e.setHours(0,0,0,0),e},Formstack.Util.setDate=function(e){var t=new Date,i=document.getElementById("field"+e+"Y");if(i){var r=i.options[1].value.length,a=t.getFullYear().toString();i.value=a.substring(4-r)}var s=document.getElementById("field"+e+"M");s&&(s.selectedIndex=t.getMonth()+1);var n=document.getElementById("field"+e+"D");if(n){var o=t.getDate();n.value=o<10?"0"+o:o}},Formstack.Util.setTime=function(e){var t=new Date,i=t.getHours(),r=document.getElementById("field"+e+"H");if(r){var a=i;r.options.length<=13&&12<i&&(a-=12),r.value=a<10?"0"+a:a}var s=document.getElementById("field"+e+"I");if(s){var n=t.getMinutes();s.value=n<10?"0"+n:n}var o=document.getElementById("field"+e+"S");if(o){var l=t.getSeconds();o.value=l<10?"0"+l:l}var d=document.getElementById("field"+e+"A");d&&(d.selectedIndex=i<12?1:2)},Formstack.Util.formatNumber=function(e,t){for(isNaN(e.decimals)||(t=(t=parseFloat(t)).toFixed(e.decimals));/(\d+)(\d{3})/.test(t.toString());)t=t.toString().replace(/(\d+)(\d{3})/,"$1,$2");var i=null,r=null;return e.currency&&(e.currencySymbol&&(i=e.currencySymbol),e.currencyPrefix&&(i=e.currencyPrefix),e.currencySuffix&&(r=e.currencySuffix)),i&&(t=i+t),r&&(t+=r),t},Formstack.Util.monthToInt=function(e){if(isFinite(e))return parseInt(e);var t=e.substr(0,3).toLowerCase(),i=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"].indexOf(t);return-1<i?i+1:0},Formstack.Util.Loader=function(){this.loading={}},Formstack.Util.Loader.prototype.load=function(e,t){if(this.loading[e])this.loading[e].success.push(t);else{this.loading[e]={success:[t]};var i=document.getElementsByTagName("head")[0]||document.documentElement,r=document.createElement("script");r.src=e;var a=!1;r.onload=r.onreadystatechange=$.proxy(function(){a||r.readyState&&"loaded"!==r.readyState&&"complete"!==r.readyState||(a=!0,r.onload=r.onreadystatechange=null,this.success(e))},this),i.insertBefore(r,i.firstChild)}},Formstack.Util.Loader.prototype.success=function(e){if(this.loading[e])if(this.loading[e].success&&this.loading[e].success.length){for(var t=this.loading[e].success,i=t.length,r=0;r<i;r++)t[r]&&"function"==typeof t[r]&&t[r]();delete this.loading[e]}else delete this.loading[e]},Formstack.Util.addEvent=function(e,t,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i)},Formstack.Util.removeEvent=function(e,t,i){t.addEventListener?t.removeEventListener(e,i,!1):t.attachEvent&&t.detachEvent("on"+e,i)},Formstack.Form.prototype._applyRequiredFieldValidation=function(e){for(var t=!0,i=$(e),r=i.find(".fsRequired"),a=0;a<r.length;a++){var s=r[a],n=$(s).parents(".fsMatrixFieldset"),o=void 0!==n[0],l=o&&"disabled"===$(n[0]).attr("disabled");if(s.disabled||l)break;if((t=this.checkRequired(s)&&t)||this.hasAlreadyFailedValidation(s)||this.failedContainers.push(e),!this.hasAlreadyFailedValidation(s)){var d=this.getFieldContainer(s),c=this.failedContainers.indexOf(d);-1!==c&&this.failedContainers.splice(c,1)}var u=i.attr("fs-field-type");if(o||"checkbox"===u||"radio"===u)break}return t||$(e).addClass("fsValidationError"),t},window.Formstack=Formstack,window.Formstack.Util.Loader=new Formstack.Util.Loader,String.prototype.trim||(jq=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,String.prototype.trim=function(){return this.replace(jq,"")})}(window,jQuery);