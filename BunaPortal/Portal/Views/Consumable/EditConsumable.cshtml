@using BunaPortal;
@model DALEFModel.Consumable
<script src = "@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" ></script>
	<div class="modal fade" id="modal1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="content">
				<div class="box-header">
					<button type = "button" name="btnclose" id="btnclose" class="close" data-dismiss="modal">x</button>
					<h4 class="modal-title">@Html.Label(@Html.Encode(Localizer.Current.GetString("Consumable")), new { @class = "col-md-2 control-label" })</h4>
				</div>

				<div id = "result" ></div>
				@using(Ajax.BeginForm("EditConsumable", "Consumable", new AjaxOptions
					{
						HttpMethod = "POST",
						InsertionMode = InsertionMode.Replace,
						UpdateTargetId = "result"
					}))
					{
						try {
							@* @Html.AntiForgeryToken()*@
							@Html.ValidationSummary(true)

																@Html.HiddenFor(o => o.ConsumableID)

																@Html.HiddenFor(o => o.OrgID)

																@Html.HiddenFor(o => o.VersionNo)

										<div class="col-md-12"> 
												<div class="row">
													<div class="box-default">
														<div class="box-header with-border">
															<h3 class="box-title">@Html.Encode(Localizer.Current.GetString("GroupBoxAmount"))</h3>

															<div class="box-body">
																<div class="col-md-6">
																	<div class="form-group">
																		@Html.CustomLabelFor(o => o.StpConsumableTypeID)
																		@Html.CustomDropDownListFor(st => st.StpConsumableTypeID)
																		@Html.CustomValidationMessageFor(o => o.StpConsumableTypeID)
																	</div>
																</div>

																<div class="col-md-6">
																	<div class="form-group">
																		@Html.CustomLabelFor(o => o.StpUnitOfMeasureID)
																		@Html.CustomDropDownListFor(st => st.StpUnitOfMeasureID)
																		@Html.CustomValidationMessageFor(o => o.StpUnitOfMeasureID)
																	</div>
																</div>

																<div class="col-md-6">
																	<div class="form-group">
																		@Html.CustomLabelFor(o => o.QuantityInUOM)
																		@Html.CustomTextBoxFor(o => o.QuantityInUOM)
																		@Html.CustomValidationMessageFor(o => o.QuantityInUOM)
																	</div>
																</div>

																<div class="col-md-6">
																	<div class="form-group">
																		@Html.CustomLabelFor(o => o.IsClaimable)
																		@Html.CustomCheckBoxFor(o => o.IsClaimable)
																	</div>
																</div>

															</div>
														</div>
													</div>
												</div>
										</div>

										<div class="col-md-12"> 
												<div class="row">
													<div class="box-default">
														<div class="box-header with-border">
															<h3 class="box-title">@Html.Encode(Localizer.Current.GetString("GroupBoxDetail"))</h3>

															<div class="box-body">
																<div class="col-md-6">
																	<div class="form-group">
																		@Html.CustomLabelFor(o => o.AssetID)
																		@Html.CustomDropDownListFor(st => st.AssetID)
																		@Html.CustomValidationMessageFor(o => o.AssetID)
																	</div>
																</div>

																<div class="col-md-6">
																	<div class="form-group">
																		@Html.CustomLabelFor(o => o.UsedOnAssetID)
																		@Html.CustomDropDownListFor(st => st.UsedOnAssetID)
																		@Html.CustomValidationMessageFor(o => o.UsedOnAssetID)
																	</div>
																</div>

																<div class="col-md-6">
																	<div class="form-group">
																		@Html.CustomLabelFor(o => o.OpeningQuantity)
																		@Html.CustomTextBoxFor(o => o.OpeningQuantity)
																		@Html.CustomValidationMessageFor(o => o.OpeningQuantity)
																	</div>
																</div>

																<div class="col-md-6">
																	<div class="form-group">
																		@Html.CustomLabelFor(o => o.ClosingQuantity)
																		@Html.CustomTextBoxFor(o => o.ClosingQuantity)
																		@Html.CustomValidationMessageFor(o => o.ClosingQuantity)
																	</div>
																</div>

																<div class="col-md-6">
																	<div class="form-group">
																		@Html.CustomLabelFor(o => o.StpUOMForOpenAndCloseID)
																		@Html.CustomDropDownListFor(st => st.StpUOMForOpenAndCloseID)
																		@Html.CustomValidationMessageFor(o => o.StpUOMForOpenAndCloseID)
																	</div>
																</div>

																<div class="col-md-6">
																	<div class="form-group">
																		@Html.CustomLabelFor(o => o.Reason)
																		@Html.CustomTextBoxAreaFor(o => o.Reason)
																		@Html.CustomValidationMessageFor(o => o.Reason)
																	</div>
																</div>

															</div>
														</div>
													</div>
												</div>
										</div>

										<div class="col-md-12"> 
												<div class="row">
													<div class="box-default">
														<div class="box-header with-border">
															<h3 class="box-title">@Html.Encode(Localizer.Current.GetString("GroupBoxPurchase Detail"))</h3>

															<div class="box-body">
																<div class="col-md-6">
																	<div class="form-group">
																		@Html.CustomLabelFor(o => o.IsPurchase)
																		@Html.CustomCheckBoxFor(o => o.IsPurchase)
																	</div>
																</div>

																<div class="col-md-6">
																	<div class="form-group">
																		@Html.CustomLabelFor(o => o.PurchaseDate)
																		@Html.CustomTextBoxFor(o => o.PurchaseDate)
																		@Html.CustomValidationMessageFor(o => o.PurchaseDate)
																	</div>
																</div>

																<div class="col-md-6">
																	<div class="form-group">
																		@Html.CustomLabelFor(o => o.PurchasePrice)
																		@Html.CustomTextBoxFor(o => o.PurchasePrice)
																		@Html.CustomValidationMessageFor(o => o.PurchasePrice)
																	</div>
																</div>

																<div class="col-md-6">
																	<div class="form-group">
																		@Html.CustomLabelFor(o => o.PurchaseTax)
																		@Html.CustomTextBoxFor(o => o.PurchaseTax)
																		@Html.CustomValidationMessageFor(o => o.PurchaseTax)
																	</div>
																</div>

																<div class="col-md-6">
																	<div class="form-group">
																		@Html.CustomLabelFor(o => o.PurchaseCosts)
																		@Html.CustomTextBoxFor(o => o.PurchaseCosts)
																		@Html.CustomValidationMessageFor(o => o.PurchaseCosts)
																	</div>
																</div>

																<div class="col-md-6">
																	<div class="form-group">
																		@Html.CustomLabelFor(o => o.Supplier)
																		@Html.CustomTextBoxFor(o => o.Supplier)
																		@Html.CustomValidationMessageFor(o => o.Supplier)
																	</div>
																</div>

															</div>
														</div>
													</div>
												</div>
										</div>

										<div class="col-md-12"> 
												<div class="row">
													<div class="box-default">
                                                        <div class="box-header with-border">
                                                            <h3 class="box-title">@Html.Encode(Localizer.Current.GetString("GroupBoxAudit"))</h3>
                                                            @Html.HiddenFor(o => o.ChangedByID)
                                                            @Html.HiddenFor(o => o.CreatedByID)
                                                            @Html.HiddenFor(o => o.CreateDateTime)
                                                            @Html.HiddenFor(o => o.ChangeDateTime)
                                                            <div class="box-body">

                                                                <div class="col-md-6">
                                                                    <div class="form-group">
                                                                        @Html.CustomLabelFor(o => o.CreatedByID)
                                                                        @Html.CustomDropDownListFor(st => st.CreatedByID)
                                                                        @Html.CustomValidationMessageFor(o => o.CreatedByID)
                                                                    </div>
                                                                </div>


                                                                <div class="col-md-6">
                                                                    <div class="form-group">
                                                                        @Html.CustomLabelFor(o => o.CreateDateTime)
                                                                        @Html.CustomTextBoxFor(o => o.CreateDateTime)
                                                                        @Html.CustomValidationMessageFor(o => o.CreateDateTime)
                                                                    </div>
                                                                </div>

                                                                <div class="col-md-6">
                                                                    <div class="form-group">
                                                                        @Html.CustomLabelFor(o => o.ChangeDateTime)
                                                                        @Html.CustomTextBoxFor(o => o.ChangeDateTime)
                                                                        @Html.CustomValidationMessageFor(o => o.ChangeDateTime)
                                                                    </div>
                                                                </div>

                                                                <div class="col-md-6">
                                                                    <div class="form-group">
                                                                        @Html.CustomLabelFor(o => o.ChangedByID)
                                                                        @Html.CustomDropDownListFor(st => st.ChangedByID)
                                                                        @Html.CustomValidationMessageFor(o => o.ChangedByID)
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
													</div>
												</div>
										</div>

						<div class="modal-footer">
						<button type = "submit" class="btn btn-default">@Localizer.Current.GetString("Save")</button>
						</div>
						}
						catch (Exception ex)
						{
						<script type = "text/javascript" >
							ShowNotification(false, '@ex.Message.Replace("'","\'").Replace("\r\n"," <br/> ")');
						</script>
						}
					}
			</div>
		</div>
	</div>
	<script>
		$(document).ready(function () {
		$('#modal1').attr('class', 'modal fade').attr('aria-labelledby', 'myModalLabel');
			$('#modal1').modal('show');
            $("#modal1").on('hide.bs.modal', function () {
                $('#tblGridConsumable').DataTable().ajax.reload();

            });
		document.getElementById("btnclose").onclick = function () { $('#tblGridConsumable').DataTable().ajax.reload(); };

            $('input[type="datetime"]').datepicker({
                autoclose: true,
                dateFormat: 'yy/mm/dd'
            });
            $.validator.methods.number = function (value, element) {
                //var regex = /^(\d*)(\,\d{1,2})?$/; //99999,99
               // return regex.test(value);
				return true;
            }

		});
	</script>
